# Maintainer: Cowington Post <cowingtonpost@gmail.com>
pkgname=swaysome
pkgver=2.3.0
pkgrel=0
pkgdesc="Helps you configure sway to work a bit more like AwesomeWM"
url="https://gitlab.com/hyask/swaysome"
arch="all"
license="MIT"
depends="sway"
makedepends="cargo cargo-auditable"
subpackages="$pkgname-doc"
source="https://gitlab.com/hyask/swaysome/-/archive/$pkgver/swaysome-$pkgver.tar.gz"
options="net !check" # tests broken on latest version

prepare() {
	default_prepare

	cargo fetch --target="$CTARGET" --locked
}

build() {
	cargo auditable build --frozen --release
}

check() {
	cargo test --frozen
}

package() {
	install -Dm755 target/release/"$pkgname" -t "$pkgdir"/usr/bin

	install -D -m644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
}

sha512sums="
5f913b42f7d028cf6a009d8a1c99cd240fd4d8b8890d72aac1d049cafe6031f7bcb127c5712979d136c12b85b5978544a8ef042a62f310dd603da0209874ca08  swaysome-2.3.0.tar.gz
"
