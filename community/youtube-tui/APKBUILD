# Contributor: Cowington Post <cowingtonpost@gmail.com>
maintainer="Matthias Ahouansou <matthias@ahouansou.cz>"
pkgname=youtube-tui
pkgver=0.9.1
pkgrel=1
pkgdesc="Aesthetically pleasing YouTube TUI written in Rust"
url="https://tui.siri.ws/youtube/"
arch="all !loongarch64" # https://github.com/bytecodealliance/rustix/issues/1496
license="GPL-3.0-or-later"
depends="yt-dlp"
makedepends="
	cargo-auditable
	clang-libclang
	libsixel-dev
	mpv-dev
	"
source="
	https://github.com/Siriusmart/youtube-tui/archive/v$pkgver/youtube-tui-$pkgver.tar.gz
	enable-bindgen.patch
	"
options="!check" # no tests

prepare() {
	default_prepare

	cargo fetch --target="$CTARGET" --locked
}

build() {
	cargo auditable build --frozen --release
}

package() {
	install -Dm755 target/release/youtube-tui -t "$pkgdir"/usr/bin
}

sha512sums="
d32c37bc54276d1d3cc35f9e5b0fe66a3e15c9b8c04e29e9e788d729e85f61ae804b65c9bc965dcc4361b83e6d8d315db975d5b632ce707b060b3e64d9ced395  youtube-tui-0.9.1.tar.gz
b2a6703b7b9287c157f146585bddc8e5cb453498f103cf6f6c457ffb182f467c0831fa725d030797f913a40d4576ed4287856db73c96b421b7695e7788c02d27  enable-bindgen.patch
"
