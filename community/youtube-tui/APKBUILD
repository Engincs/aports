# Contributor: Cowington Post <cowingtonpost@gmail.com>
maintainer="Matthias Ahouansou <matthias@ahouansou.cz>"
pkgname=youtube-tui
pkgver=0.9.2
pkgrel=0
pkgdesc="Aesthetically pleasing YouTube TUI written in Rust"
url="https://tui.siri.ws/youtube/"
arch="all !loongarch64" # https://github.com/bytecodealliance/rustix/issues/1496
license="GPL-3.0-or-later"
depends="yt-dlp"
makedepends="
	cargo-auditable
	clang-libclang
	libsixel-dev
	mpv-dev
	"
source="
	https://github.com/Siriusmart/youtube-tui/archive/v$pkgver/youtube-tui-$pkgver.tar.gz
	enable-bindgen.patch
	update-cargo-lock.patch
	"
options="!check" # no tests

prepare() {
	default_prepare

	cargo fetch --target="$CTARGET" --locked
}

build() {
	cargo auditable build --frozen --release
}

package() {
	install -Dm755 target/release/youtube-tui -t "$pkgdir"/usr/bin
}

sha512sums="
36b544285ec1286ee771e5fbb22abb82517a86e810200a56024703f438927f9ea42effc5280abaaec74074fcd87a97369e66ebd6064981ab0838c8e6394637d9  youtube-tui-0.9.2.tar.gz
4ac696d17a01449c8bfb5cbce857220d9b830e038da4f79dd5747ab9f3814c885a56b9087adae84f63f2a1895030450bd307c84aadd9ddd4d039b15b18b9c121  enable-bindgen.patch
b297f787ad4455c589416e6a018e04a5b5a6327c55a5cc0d03d6744ab8eee31338ddddf0d2964026a0a6ed5e64b28fe1cc7bd04ef1bce5f5a84b2bc0ab4c4134  update-cargo-lock.patch
"
