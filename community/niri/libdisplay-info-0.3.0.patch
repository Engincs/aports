From 6b7c3106c1d6e24acdc3366502f4a492ee715320 Mon Sep 17 00:00:00 2001
From: Achill Gilgenast <achill@achill.org>
Date: Wed, 13 Aug 2025 09:13:06 +0200
Subject: [PATCH] Switch to libdisplay-info-rs fork allowing libdisplay-info
 0.3.0

Signed-off-by: Achill Gilgenast <achill@achill.org>
---
 Cargo.lock | 11 ++++-------
 Cargo.toml |  5 +++--
 2 files changed, 7 insertions(+), 9 deletions(-)

diff --git a/Cargo.lock b/Cargo.lock
index da59d82a..c9326e49 100644
--- a/Cargo.lock
+++ b/Cargo.lock
@@ -1990,8 +1990,7 @@ checksum = "d750af042f7ef4f724306de029d18836c26c1765a54a6a3f094cbd23a7267ffa"
 [[package]]
 name = "libdisplay-info"
 version = "0.2.2"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "4210cfe93a0dc37228e08105e3c13171e5af816f7bd39e00e3d3adcf2b487a2b"
+source = "git+https://github.com/fossdd/libdisplay-info-rs?branch=0.3.0#ecc50329a9ecb98944bbc8834862a9f167b0a71f"
 dependencies = [
  "bitflags 2.9.1",
  "libc",
@@ -2003,8 +2002,7 @@ dependencies = [
 [[package]]
 name = "libdisplay-info-derive"
 version = "0.1.0"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "ea1cd31036b732a546d845f9485c56b1b606b5e476b0821c680dd66c8cd6fcee"
+source = "git+https://github.com/fossdd/libdisplay-info-rs?branch=0.3.0#ecc50329a9ecb98944bbc8834862a9f167b0a71f"
 dependencies = [
  "proc-macro2",
  "quote",
@@ -2014,8 +2012,7 @@ dependencies = [
 [[package]]
 name = "libdisplay-info-sys"
 version = "0.2.2"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "7f4f9264ece23c37ffa023ae635f48d588e1786745dad06dff10c9fb99dc646c"
+source = "git+https://github.com/fossdd/libdisplay-info-rs?branch=0.3.0#ecc50329a9ecb98944bbc8834862a9f167b0a71f"
 dependencies = [
  "semver",
  "system-deps 7.0.3",
@@ -3564,7 +3561,7 @@ dependencies = [
 [[package]]
 name = "smithay-drm-extras"
 version = "0.1.0"
-source = "git+https://github.com/Smithay/smithay.git#ede27079f45eeb7c21796e22f3bc25b741b024ea"
+source = "git+https://github.com/fossdd/smithay.git?branch=libdisplay-info-0.3.0#55eec02781d1318642ebc62158323fcd6fcd01d1"
 dependencies = [
  "drm",
  "libdisplay-info",
diff --git a/Cargo.toml b/Cargo.toml
index ed1d8b6e..dcd13100 100644
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -33,7 +33,8 @@ default-features = false
 
 [workspace.dependencies.smithay-drm-extras]
 # version = "0.1.0"
-git = "https://github.com/Smithay/smithay.git"
+git = "https://github.com/fossdd/smithay.git"
+branch = "libdisplay-info-0.3.0"
 # path = "../smithay/smithay-drm-extras"
 
 [package]
@@ -69,7 +70,7 @@ glam = "0.30.3"
 input = { version = "0.9.1", features = ["libinput_1_21"] }
 keyframe = { version = "1.1.1", default-features = false }
 libc = "0.2.172"
-libdisplay-info = "0.2.2"
+libdisplay-info = { git = "https://github.com/fossdd/libdisplay-info-rs", branch = "0.3.0" }
 log = { version = "0.4.27", features = ["max_level_trace", "release_max_level_debug"] }
 niri-config = { version = "25.5.1", path = "niri-config" }
 niri-ipc = { version = "25.5.1", path = "niri-ipc", features = ["clap"] }
-- 
2.50.1

