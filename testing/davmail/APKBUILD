# Maintainer: Struan Robertson <contact@struan.tech>
pkgname=davmail
pkgver=6.4.0
pkgrel=0
pkgdesc="DavMail POP/IMAP/SMTP/Caldav/Carddav/LDAP Exchange and Office 365 Gateway"
url="https://davmail.sourceforge.net"
# riscv64: blocked by openjdk8
arch="noarch !riscv64"
license="GPL-2.0-only"
makedepends="
	apache-ant
	openjdk8
"
depends="
	java-jdk
"
source="$pkgname-$pkgver.tar.gz::https://github.com/mguessan/davmail/archive/$pkgver/davmail-$pkgver.tar.gz"
options="net !check"

build() {
	ant
}

package() {
	  cd dist
	  mkdir -p "$pkgdir"/usr/share/"$pkgname"/lib
	  install -Dm644 "$pkgname".jar "$pkgdir"/usr/share/"$pkgname"
	  install -D lib/* "$pkgdir"/usr/share/"$pkgname"/lib
	  mkdir -p "$pkgdir"/usr/bin/
	  install -Dm755 "$pkgname" "$pkgdir"/usr/bin/
}

sha512sums="
9e71bd897d88fc1463fb937f830fa5feb01bbb43fa0d63f1cf9860e10a3860d7fb053c540c9f588eaa6c637808700c4012ab7b0759ca0c8e392f09f471bed4c6  davmail-6.4.0.tar.gz
"
