# Maintainer: dabao1955 <dabao1955@163.com>
pkgname=ruri
pkgver=3.9.1
pkgrel=0
pkgdesc="A self-contained Linux container implementation"
url="https://github.com/RuriOSS/ruri"
arch="all"
license="MIT"
options="!check" # Upstream have test but can not run in docker enviroment.
makedepends="
	libcap-dev
	libseccomp-dev
	cmake
	samurai
	"
source="$pkgname-$pkgver.tar.gz::https://github.com/Moe-hacker/ruri/archive/refs/tags/v$pkgver.tar.gz"
subpackages="$pkgname-doc"

build() {
	cmake -B build -G Ninja \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_BUILD_TYPE=Release

	cmake --build build
}

package() {
	install -Dm755 build/ruri -t "$pkgdir"/usr/bin/
	install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/COPYING
}

sha512sums="
a95af0d671b8d41696ec47b511f59eabaee4454607a8d36c46536711edb30dfc6b7668ab950aac57e9651548de4b3240c289f0fd3f64c54d5eb808b9689a5799  ruri-3.9.1.tar.gz
"
