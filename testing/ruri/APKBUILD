# Maintainer: dabao1955 <dabao1955@163.com>
pkgname=ruri
pkgver=3.9.2
pkgrel=0
pkgdesc="A self-contained Linux container implementation"
url="https://github.com/RuriOSS/ruri"
arch="all"
license="MIT"
options="!check" # Upstream have test but can not run in docker enviroment.
makedepends="
	libcap-dev
	libseccomp-dev
	cmake
	samurai
	"
source="$pkgname-$pkgver.tar.gz::https://github.com/RuriOSS/ruri/archive/refs/tags/v$pkgver.tar.gz"
subpackages="$pkgname-doc"

build() {
	cmake -B build -G Ninja \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_BUILD_TYPE=Release

	cmake --build build
}

package() {
	install -Dm755 build/ruri -t "$pkgdir"/usr/bin/
	install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/COPYING
}

sha512sums="
b93ff7acb1878abaac4b8aa07c8d058073bf1b47ae21a7f14575f5bca86e8f639d7bbdd6621b49473295b3916d8710f469595fde462690e8a23d7d2ca5bf0044  ruri-3.9.2.tar.gz
"
