# Contributor: Galen Abell <galen@galenabell.com>
# Maintainer: Galen Abell <galen@galenabell.com>
pkgname=helm-ls
pkgver=0.5.1
pkgrel=0
pkgdesc="Language server for Helm"
url="https://github.com/mrjosh/helm-ls"
arch="all"
license="MIT"
makedepends="go"
options="chmod-clean net"
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/mrjosh/helm-ls/archive/refs/tags/v$pkgver.tar.gz"

export GOCACHE="${GOCACHE:-"$srcdir/go-cache"}"
export GOTMPDIR="${GOTMPDIR:-"$srcdir"}"
export GOMODCACHE="${GOMODCACHE:-"$srcdir/go"}"

build() {
	go build -ldflags="-buildid= -X main.Version=$pkgver"
}

check() {
	go test ./...
}

package() {
	install -Dm755 "$pkgname" "$pkgdir"/usr/bin/helm_ls
	install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
}

sha512sums="
ae0931364856545954b847ff7adbdec136e0101d2b80663ef97ff5a3475715838e07913e1dd46f5e48b78ee4022fb299da6ecafd4b554a8896767588b687f892  helm-ls-0.5.1.tar.gz
"
