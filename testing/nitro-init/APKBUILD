# Contributor: Guy Godfroy <guy.godfroy@gugod.fr>
# Maintainer: Guy Godfroy <guy.godfroy@gugod.fr>
pkgname=nitro-init
_pkgname=nitro
pkgver=0.3
pkgrel=0
pkgdesc="Tiny but flexible init system and process supervisor"
url="https://git.vuxu.org/nitro/"
arch="all"
license="0BSD"
subpackages="$pkgname-doc"
source="$_pkgname-$pkgver.tar.gz::https://git.vuxu.org/nitro/snapshot/nitro-$pkgver.tar.gz"
builddir="$srcdir/$_pkgname-$pkgver/"
options="!check" # test suite not yet released

build() {
	make
}

check() {
	make check
}

package() {
	install -Dm755 nitro "$pkgdir"/usr/sbin/nitro
	install -Dm755 nitroctl "$pkgdir"/usr/bin/nitroctl
	install -Dm644 nitroctl.1 -t "$pkgdir"/usr/share/man/man1/
	install -Dm644 nitro.8 -t "$pkgdir"/usr/share/man/man8/
	install -Dm644 halt.8 -t "$pkgdir"/usr/share/man/man8/
}

sha512sums="
b62fb18521bfc0498553407454edee5c2e7477b94c36e21cd85ef993e41255379685df03eea41204508f58e1b056a2af6042b0be25139e45ce3f780c867943af  nitro-0.3.tar.gz
"
