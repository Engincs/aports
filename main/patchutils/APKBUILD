# Contributor: Leo <thinkabit.ukim@gmail.com>
# Maintainer: Celeste <cielesti@protonmail.com>
maintainer="Celeste <cielesti@protonmail.com>"
pkgname=patchutils
pkgver=0.4.3
pkgrel=0
pkgdesc="Programs for manipulating patch files"
options="!check" # 6 tests fail
url="https://cyberelk.net/tim/software/patchutils/"
arch="all"
license="GPL-2.0-or-later"
depends="perl"
makedepends="xmlto"
checkdepends="diffutils"
subpackages="$pkgname-bash-completion $pkgname-doc"
source="https://cyberelk.net/tim/data/patchutils/stable/patchutils-$pkgver.tar.xz
	redirectfd.patch
	"

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info \
		--localstatedir=/var
	make
}

check() {
	make check
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
cf6fcfad4d0deb993ddf3d3da9aff059ff36ee832e612e34d4b03e4dde5f2263875b7df3e02823c70ae80cfb415d1c33fcccbeb2e5f15e191e996219d4b9d062  patchutils-0.4.3.tar.xz
cb10c8ed0d3e744f21597ecea9f59da477e5e7dd1493c87c8f8a11d7b55b7573609617da56dfa5406aedb8fe244be4193978ed42360dbb683c220ec3e5e1da11  redirectfd.patch
"
